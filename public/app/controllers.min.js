commerceApp.controller("cartController",["$scope","$location","$http","$log","$route","ngCart","shareService",function(t,e,r,o,i,n,a){t.totalShipping=a.totalShipping;t.$watch("shareService.totalShipping",function(){t.totalShipping=a.totalShipping})}]);commerceApp.controller("checkoutController",["$scope","$location","$http","$log","$route","ngCart","shareService",function(t,e,r,o,i,n,a){t.items=a.items;t.carttax=a.carttax;t.$watch("shareService.items",function(){t.items=a.items});t.$watch("shareService.carttax",function(){t.carttax=a.carttax})}]);commerceApp.controller("detailsController",["$scope","$location","$http","$log","$route","ngCart","shareService","$routeParams",function(t,e,r,o,i,n,a,c){t.department=a.cat;t.currentItem=c.id;t.details=a.details;t.toCart=a.toCart;t.goShopping=a.goShopping;t.getDetails=function(){r({method:"GET",url:"/products"}).then(function e(r){t.products=r.data;for(var i=0;i<t.products.length;i++){if(t.products[i]._id==t.currentItem){o.info("MATCH AT product "+i+" product id : "+t.products[i]._id+" matches "+t.currentItem);t.thisProduct=t.products[i]}}if(t.thisProduct===undefined){o.error("unable to find match in product database. Please check url")}},function i(t){o.error("getDetails error : "+t)})};t.filterFunction=function(t){var e=t.department.match(a.cat)?true:false;return e===true?true:false};t.getDetails()}]);commerceApp.controller("headerController",["$scope","$location","$http","$log","$route","shareService",function(t,e,r,o,i,n){t.header=[{name:"header.html",url:"app/pages/header.html"}];t.header=t.header[0];t.shareService=n;t.toProfile=n.toProfile;t.toLogin=n.toLogin;t.toRegister=n.toRegister;t.logout=n.logout;t.displayLogin=true;t.$watch("shareService.didLogout",function(e,r){if(e===true){n.didLogout=false;t.displayLogin=true}});t.getUser=function(){r({method:"GET",url:"/user"}).then(function e(r){t.user=r.data;o.debug("/user callback was : "+JSON.stringify(r.data));if(t.user===""){t.displayLogin=true}else{t.displayLogin=false}},function i(e){o.error("/user error was : "+e);t.user="user error"})};t.getUser()}]);commerceApp.controller("mainController",["$scope","$location","$http","$log","$route","ngCart","shareService","$routeParams",function(t,e,r,o,i,n,a,c){n.setTaxRate(7.5);n.setShipping(2.99);t.details=a.details;t.goShopping=a.goShopping;t.toCart=a.toCart;t.cartDetails=function(){var e=n.getItems();t.items=[];t.shippingTotal=0;for(var r=0;r<e.length;r++){var i=t.randomShipping().toFixed(2);t.shippingTotal=Number(t.shippingTotal)+Number(i);o.debug("shipping : "+i);o.debug("shipping total + shipping = "+t.shippingTotal);var c={name:e[r]._name,id:e[r]._id,price:e[r]._price,quantity:e[r]._quantity,shipping:i};t.items.push(c)}a.items=t.items;a.totalShipping=t.shippingTotal;o.info("Items Array from cartDetails : "+t.items);a.carttax=(n.getSubTotal()*.075).toFixed(2)};t.randomShipping=function(){return Math.random()*(50-5)+5};t.cartDetails()}]);commerceApp.controller("productController",["$scope","$location","$http","$log","$route","ngCart","$routeParams","shareService",function(t,e,r,o,i,n,a,c){t.department=c.cat;t.subcategory=c.subcat;t.getProducts=function(){r({method:"GET",url:"/products"}).then(function e(r){o.debug("getProducts success : "+JSON.stringify(r.data));t.products=r.data;o.debug(t.products);t.buttonFilter()},function i(t){o.error("getProducts error : "+t)})};t.buttonFilter=function(){var e=[];var r=[];for(var i=0;i<t.products.length;i++){r[i]=t.products[i].department;r=r.filter(function(t,e){return r.indexOf(t)==e})}for(var n=0;n<r.length;n++){e[n]=[];for(var a=0;a<t.products.length;a++){if(t.products[a].department===r[n]){o.debug(r[n]+" "+t.products[a].productAdjective);e[n].push(t.products[a].productAdjective);e[n]=e[n].filter(function(t,r){return e[n].indexOf(t)==r})}}}o.debug(r);o.debug(e);t.categoriesInfo=r;t.subcategoriesInfo=e};t.resetFilter=function(){t.department="";c.cat="";t.subcategory="";c.subcat=""};t.setCategory=function(e){t.department=e;c.cat=e;t.subcategory="";c.subcat=""};t.setSubcategory=function(e,r){t.department=e;c.cat=e;t.subcategory=r;c.subcat=r};t.filterFunction=function(e){var r=e.department.match(t.department)?true:false;var o=e.productAdjective.match(t.subcategory)?true:false;return r&&o===true?true:false};t.getProducts()}]);commerceApp.controller("profileController",["$scope","$location","$http","$log","$route","shareService",function(t,e,r,o,i,n){t.showEdit=false;t.profileEdit=function(){t.showEdit=true};t.toProfile=function(){t.showEdit=false};t.profileDelete=function(){var t=confirm("Are you sure you want to delete your account? This action can not be undone!");if(t==true){r({method:"DELETE",url:"/deleteprofile"}).then(function i(t){o.info(t);n.logout();e.path("/")},function a(t){o.error("failed to delete profile : "+t)})}};t.getProfileInfo=function(){r({method:"GET",url:"/profileInfo"}).then(function e(r){o.info("profile success : "+r.data);t.profileData=r.data},function i(t){o.error("profile fail : "+t)})};t.getProfileInfo()}]);